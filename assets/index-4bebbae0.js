var Nt=Object.defineProperty;var Ht=(t,a,n)=>a in t?Nt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;var qe=(t,a,n)=>(Ht(t,typeof a!="symbol"?a+"":a,n),n);import{r as l,u as et,j as e,h as tt,P as Ot,C as Wt,v as zt,l as _t,m as Ut,D as $t,o as Vt,p as Yt,q as qt}from"./vendor-7e1f3469.js";import{c as gt,u as E,M as mt,B as v,T as d,a as J,d as xt,s as Gt,I as je,b as Jt,e as Xt,f as Kt,A as Qt,g as Zt,h as ft,i as vt,j as yt,k as Ze,l as Le,C as ea,m as ta,n as bt,o as aa,p as sa,q as ia,r as na,t as ra,v as at,w as la,D as we,x as g,y as Pe,S as Re,z as Z,E as oa,F as da,G as ca,H as ua,J as ha,K as pa,L as Te,N as ga,O as Ge,P as ma,Q as xa,R as fa,U as va,V as ya,W as ba,X as ja,Y as wa,Z as Me,_ as Ca,$ as Sa,a0 as ka,a1 as Ta,a2 as Ma,a3 as Ia}from"./vendor_mui-f1971f20.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const xe={100:"#ffbaba",200:"#ff7b7b",300:"#ff5252",500:"#ff0000",600:"#e60000",900:"#772407"},Je={100:"#b2d8d8",200:"#80bfbf",300:"#66b2b2",500:"#19857b",600:"#19857b"},be={100:"#f5dff3",300:"#dfc8dd",400:"#c9b1c4",500:"#856798",600:"#6d4f8c"},lt={100:"#F5F5F5",200:"#DBDBDB",300:"#959595",500:"#595959"},Xe={100:"#FFF7E9",200:"#FFE8BD",300:"#FFDC99",400:"#FFD27C",500:"#FFB526",600:"#CC901E",700:"#996C16",800:"#664806",900:"#332407"},Ke={100:"#C1D1DB",200:"#75A2BF",300:"#5E8CAD",500:"#46769B",600:"#325a7f",700:"#1f4463",800:"#0c2e47",900:"#00182c"},Aa="#000000",De="#FFFFFF",G={sm:600,md:800,lg:1280,xl:1920},Ie={title:"custom",name:"custom",size:"",type:"",alignment:"",hitDice:"",hp:"",ac:"",strength:"10",dexterity:"10",constitution:"10",intelligence:"10",wisdom:"10",charisma:"10",speed:"",skills:"",vulnerabilities:"",resistances:"",damageImmunities:"",conditionImmunities:"",senses:"",challengeRating:"",specialAbilities:"",actions:"",legendaryActions:"",image:"",languages:"",description:"",notes:""},Da={xl:6,lg:4,md:2,sm:1},La={upload:"This will replace all of your card data. Are you sure you want to continue?",reset:"This will delete all of your card data. Are you sure you want to continue?",fileType:"Please upload a JSON file."},oe=["rules"],Ba={"droppable-1":[],"droppable-2":[],"droppable-3":[],"droppable-4":[]},ot=gt(),Y=gt({palette:{contrastThreshold:4.5,primary:{main:be[500],light:be[300]},secondary:{main:xe[500]},error:{main:xe[500],light:xe[300]},background:{paper:De},grey:lt,Note:{dark:Je[600],main:Je[300],light:Je[200]},Map:{dark:be[600],main:be[500],light:be[300]},Monster:{dark:xe[600],main:xe[300],light:xe[200]},Rule:{dark:Xe[600],main:Xe[400],light:Xe[200]},Player:{dark:Ke[600],main:Ke[300],light:Ke[200]}},spacing:8,breakpoints:{values:{xs:0,sm:G.sm,md:G.md,lg:G.lg,xl:G.xl}},typography:{mainTitle:{fontSize:ot.spacing(5),fontWeight:300},cardHeader:{paddingTop:ot.spacing(0)},cardSubtitle:{color:lt[500],fontWeight:500},cardSectionLabel:{fontWeight:500,alignSelf:"flex-start"},fieldLabel:{fontWeight:900}},components:{MuiTypography:{defaultProps:{variantMapping:{mainTitle:"h1",cardHeader:"h2",cardSubtitle:"p",cardSectionLabel:"h3",fieldLabel:"span",fieldValue:"span"}}}}}),jt=()=>{l.useEffect(()=>{localStorage.getItem("activeTab")===null&&localStorage.setItem("activeTab",JSON.stringify(oe[0]))},[]);const[t,a]=et("activeTab",oe[0]);return[t,a]},wt=()=>{l.useEffect(()=>{localStorage.getItem("tabs")===null&&localStorage.setItem("tabs",JSON.stringify(oe))},[]);const[t,a]=et("tabs",oe);return[t,a]};var re=(t=>(t.Open="Open",t.Edit="Edit",t.Delete="Delete",t.Move="Move",t))(re||{}),h=(t=>(t.Note="Note",t.Player="Player",t.Rule="Rule",t.Map="Map",t.Monster="Monster",t))(h||{}),ne=(t=>(t.Upload="upload",t.Reset="reset",t.FileType="fileType",t))(ne||{});const dt=()=>({width:window.innerWidth,height:window.innerHeight}),Pa=t=>t.width>G.lg?"lg":t.width>G.md?"md":"sm",ct=t=>t.reduce((a,n)=>(a[n.column].push(n),a),Ba),le=(t,a=" ",n=" ")=>{if(!t)return t;const s=["of","the","a","an","and","or","but","nor","for","yet","so"];return t.split(a).map(i=>s.includes(i)?i:i[0].toUpperCase()+i.slice(1)).join(n)},Ra=t=>t.type.toLowerCase()==="application/json",ut=t=>typeof t=="string"?t:Object.entries(t).map(([a,n])=>`${a}: ${n}ft.`).join(", "),Qe=t=>typeof t=="string"?t:((t==null?void 0:t.map(n=>`### ${n.name}: 
 ${n.desc} 
`))||[]).join(`
`),Ea=t=>({title:t.name,size:t.size,type:t.type,alignment:t.alignment,hitDice:t.hit_dice,hp:t.hit_points,ac:t.armor_class,strength:t.strength,dexterity:t.dexterity,constitution:t.constitution,intelligence:t.intelligence,wisdom:t.wisdom,charisma:t.charisma,speed:ut(t.speed),proficiencies:ut(t.skills),vulnerabilities:t.damage_vulnerabilities,resistances:t.damage_resistances,damageImmunities:t.damage_immunities,conditionImmunities:t.condition_immunities,senses:t.senses,challengeRating:t.challenge_rating,specialAbilities:Qe(t.special_abilities),actions:Qe(t.actions),legendaryActions:Qe(t.legendary_actions),image:t.img_main,languages:t.languages,description:t.desc}),Fa=({dialogMessage:t,handleCancel:a,handleConfirm:n,dialogOpen:s,confirmOnly:i=!1})=>{const r=E();return e.jsx(mt,{open:s,onClose:a,"aria-labelledby":"modal-title","aria-describedby":"modal-description","data-testid":"expanded-card",children:e.jsxs(v,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:r.palette.background.paper,border:"none",borderRadius:r.spacing(1.5),boxShadow:"24px",padding:r.spacing(4),display:"flex",flexDirection:"column",maxWidth:"30%"},children:[e.jsx(v,{sx:{display:"flex",flexDirection:"column",width:"100%",height:"100%",paddingBottom:r.spacing(4)},children:e.jsx(d,{variant:"h6",children:t})}),e.jsxs(v,{sx:{width:"100%",display:"flex",alignSelf:"flex-end",justifyContent:()=>i?"center":"space-between",alignItems:"center"},children:[!i&&e.jsx(J,{variant:"outlined","aria-label":"cancel-button",onClick:a,"data-testid":"cancel-button",sx:c=>({alignSelf:"center",justifyContent:"center",width:c.spacing(15),marginLeft:"auto","& svg":{marginLeft:c.spacing(1)}}),children:"Cancel"}),e.jsxs(J,{variant:"contained","aria-label":"edit-confirm-button",onClick:n,"data-testid":"confirm-button",sx:c=>({alignSelf:"center",justifyContent:"center",width:c.spacing(15),marginLeft:"auto","& svg":{marginLeft:c.spacing(1)}}),children:["Confirm",e.jsx(xt,{})]})]})]})})},Ct={strength:{athletics:{description:"Climb a wall or a rope, swim or jump high.",headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Normal wall; Tread in rough condition; Water; Clear obstacle while jumping"},{difficulty:"Moderate",examples:"Rope from overhang; Swim in rough water"},{difficulty:"Hard",examples:"Wall with rare handholds; Catch on a rope; Violent water"},{difficulty:"Very Hard",examples:"Slippery wall; Stormy waters; Clear obstacle while jumping"}]},"feats-of-strength other":{description:"Any attempt to lift, push, pull, or break something, to force your body through a space, or to otherwise apply brute force to a situation.",headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Struck/broken door; Weak bindings; Pull stuck wedge obiect loose"},{difficulty:"Moderate",examples:"Reinforced wooden door; Hang on a wagon"},{difficulty:"Hard",examples:"Heavy locked/barred door; Topple stone statue; Pull stuck wagon"},{difficulty:"Very Hard",examples:"Heavy reinforced door; Hold door against water"}]}},dexterity:{acrobatics:{description:"Walk across difficult surface; Hold balance; Land safely; Otherwise fall / take damage.",headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Icy surface; Turbulent situation; Land on dificult terrain"},{difficulty:"Moderate",examples:"Narrow edge; swing from chandelier and land"},{difficulty:"Hard",examples:"Cross a wildly swaying rope bridge"},{difficulty:"Very Hard",examples:"Walk across a tightrope; Vault over/under an enemy"}]},"sleight-of-hand":{headers:["description","purpose"],rows:[{description:"Contest vs. Perception",purpose:"Hide an object on your person; Palm an object; Lift a purse; Plant an object on another person."}]},stealth:{headers:["description","purpose"],rows:[{description:"Contest vs. Deception",purpose:"Conceal from enemies; Sneak past targets; Slip away while others are distracted."}]},"pick-lock disarm-trap":{headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Simple lock; Simple trap"},{difficulty:"Moderate",examples:"Typical lock; Average trap"},{difficulty:"Hard",examples:"Elaborate lock; Complex trap"},{difficulty:"Very Hard",examples:"Masterwork lock; Magical trap"}]}},constitution:{concentration:{headers:["difficulty","examples"],rows:[{difficulty:"10 or half of the damage taken.",examples:"After taking damage while maintaining concentration spell."}]}},intelligence:{"arcana history nature religion":{description:{arcana:"Spells, magic items, planes of existence",history:"historical events, old kingdoms, legendary people",nature:"terrain. plants and animals",religion:"deities, rites and prayers, holy symbols"},headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Recall widely known information. (common)"},{difficulty:"Moderate",examples:"Recall more obscure or specific information. (uncommon)"},{difficulty:"Hard",examples:"Recall truly esoteric or precise information. (rare)"},{difficulty:"Very Hard",examples:"Recall information that is known only by a privileged few. (very rare)"}]},"investigation other":{description:"Identity a trap or a secret or coded message; Communicate a idea with an creature you don't share a language with; Discover the true nature of an illusion",headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Obvious trap or a secret; Simple idea with an intelligent creature; Low-level illusion"},{difficulty:"Moderate",examples:"Typical trap; Determine time or cause of death of a recentlv deceased creature; Estimate the material worth of an item; Mid-level illusion"},{difficulty:"Hard",examples:"Well-hidden trap, object, or area; Forge a document or identity such a document; High-level illusion"},{difficulty:"Very Hard",examples:"Magically-hidden trap, object, or area; Discern the purpose and process of a comblicated device or system; Determine the integrity of a structure, construct, or formation and identity any exploitable weak points."}]}},wisdom:{"insight perception":{description:{insight:"Read the intentions of a creature; Check if it the truth",perception:"Spot/recognize a location; Hear a sound; Detect a smell; Feel vibrations through the ground"},headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Read a child, prominent landmark, or structure; Hear the far-off sound of thunder signaling a coming storm"},{difficulty:"Moderate",examples:"Discern the leader of a group; the intended message of a non-verbal talk shot a natural-obscured obiect or teature: a conversation in the next room"},{difficulty:"Hard",examples:"Guess at the enemy's next action; Well-hidden object or feature; A hushed conversation through a heavv door"},{difficulty:"Very Hard",examples:"Near invisible object or feature; Read the lips of a creature vou can see but not hear"}]},survival:{description:"Follow a trail / track; forage food for a day; navigate in wilderness.",headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Well-worn trail in a forest; Tracks of a creature through snow or mud; Forage in a plentiful area; Navigate on a clear night"},{difficulty:"Moderate",examples:"Abandoned or forgotten trail; Track a creature through a forest; Forage in a sparse area; Navigate on a cloudy night; Predict an oncoming storm; Identify the signs of nearby creatures"},{difficulty:"Hard",examples:"Track over barren terrain; Forage in a harsh area; Navigate through an alien area on a cloudy night; Predict tomorrow's weather"},{difficulty:"Very Hard",examples:"Track after rainfall; Navigate an alien area on a stormy night."}]},"animal-handling medicine other":{description:{"Animal Handling":"Interact with or train an animal",Medicine:"cure or stabilize a creature , diagnose ailments"},headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Domesticated animal; Stabilize a dying creature outside of combat; Common ailment"},{difficulty:"Moderate",examples:"Wild but otherwise peaceful animal; Perform a complex maneuver while mounted; Set a broken bone; Stabilize a dying creature in the middle of combat; Uncommon ailment"},{difficulty:"Hard",examples:"Intuit a hostile animal's next action; Control an untrained mount; Rare ailment"},{difficulty:"Very Hard",examples:"Calm a dangerous wild animal; Diagnose magical and divine ailments"}]}},charisma:{deception:{headers:["description","examples"],rows:[{description:"Contest vs. Insight",examples:"Fast-talk or con someone, adopt a disguise or impersonate another creature, tell a convincing lie or otherwise hide vour true intentions."}]},intimidation:{headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Scare a spineless noble in to handing over their coin purse."},{difficulty:"Moderate",examples:"Pry information out of an uncooperative prisoner, convince street thugs to back down from a confrontation."},{difficulty:"Hard",examples:"Advise a guard that it might be best to look the other wav this time around, coerce an official in to signing a document."},{difficulty:"Very Hard",examples:"Frighten a creature larger than you, causing it to flee; Stop an agitated mob in their tracks."}]},performance:{headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Routine performance such as telling a story in a tavern or around a campfire."},{difficulty:"Moderate",examples:"Professional performance such as an inspiring speech or an impressive musical display which may attract the attention of a local troupe and lead to regional fame."},{difficulty:"Hard",examples:"Memorable pertormance which may attract the attention of a local patron and lead to national fame."},{difficulty:"Very Hard",examples:"Extraordinary performance which may attract the attention of distant patrons and even extra-planar beings."}]},persuasion:{headers:["difficulty","examples"],rows:[{difficulty:"Easy",examples:"Convince the mayor to allow your party to help calm a distraught person."},{difficulty:"Moderate",examples:"Persuade a group of highway thieves to leave in peace. Convince a friendly aquaintance that you know best."},{difficulty:"Hard",examples:"Convince a chamberlain to let your party see the king, inspire or rally a crown of townsfolk negotiate a peace between warring tribes."},{difficulty:"Very Hard",examples:"Convince a sphinx that you are worthy of the secrets it guards; Assure a dragon you're worth more alive than dead."}]}},"encounter distance":{terrain:{headers:["description","distance"],rows:[{description:"Arctic, desert, farmland, or grassland",distance:"6d6 x 10 feet"},{description:"Forest, swamp, or woodland",distance:"2d8 x 10 feet"},{description:"Hills or wastelands",distance:"2d10 x 10 feet"},{description:"Jungle",distance:"2d6 x 10 feet"},{description:"Mountains",distance:"4d10 x 10 feet"},{description:"Underdark or urban",distance:"2d4 x 10 feet"}]},"audible-distance":{headers:["description","distance"],rows:[{description:"Trying to be quiet",distance:"2d6 x 5 feet"},{description:"Normal noise level",distance:"2d6 x 10 feet"},{description:"Loud noise level",distance:"2d6 x 50 feet"}]},"visibility-outdoors":{headers:["description","distance"],rows:[{description:"Clear day, no obstructions",distance:"2 miles"},{description:"Rain",distance:"1 mile"},{description:"Fog",distance:"100 to 300 feet"},{description:"From height",distance:"x 20"}]}},conditions:{conditions:{headers:["condition","effect"],rows:[{condition:"Blinded",effect:"Automatically fail any check requiring sight. Disadvantage on attack rolls. Attackers have advantage."},{condition:"Charmed",effect:"Cannot attack the charmer or target them with harmful abilities or effects. The charmer has advantage on interacting socially with the charmed creature."},{condition:"Deafened",effect:"Automatically fail any ability check that requires hearing."},{condition:"Exhaustion",effect:"1: Disadvantage on ability checks; 2: Half Speed; 3: Disadvantage on attack rolls and saving throws; 4: HP Max halved; 5: Speed reduced to 0; 6: Death"},{condition:"Falling",effect:"At the end of a fall a creature takes 1d6 bludgeoning damage for every 10 feet they fell (max 20d6). A creature who takes damage this way is knocked prone."},{condition:"Frightened",effect:"A frightened creature has disadvantage on ability checks and attack rolls while the source of its fear is within line of sight. The creature can't willingly move closer to the source of its fear."},{condition:"Grappled",effect:"A grappled creature's speed becomes 0, and it can't benefit from any bonus to its speed. The condition ends if the grappler is incapacitated (see the condition). The condition also ends if an effect removes the grappled creature from the reach of the grappler or grappling effect, such as when a creature is hurled away by the thunderwave spell."},{condition:"Hidden",effect:"When you attack a target that you can't see, you have disadvantage on the attack roll. This is true whether you're guessing the target's location or you're targeting a creature you can hear but not see. If the target isn't in the location you targeted, you automatically miss, but the GM typically just says that the attack missed, not whether you guessed the target's location correctly. When a creature can't see you, you have advantage on attack rolls against it. If you are hidden–both unseen and unheard when you make an attack, you give away your location when the attack hits or misses."},{condition:"Incapacitated",effect:"An incapacitated creature can't take actions or reactions."},{condition:"Invisible",effect:"An invisible creature is impossible to see without the aid of magic or a special sense. For the purpose of hiding, the creature is heavily obscured. The creature's location can be detected by any noise it makes or any tracks it leaves. Attack rolls against the creature have disadvantage, and the creature's attack rolls have advantage."},{condition:"Paralyzed",effect:"A paralyzed creature is incapacitated (see the condition) and can't move or speak. The creature automatically fails Strength and Dexterity saving throws. Attack rolls against the creature have advantage. Any attack that hits the creature is a critical hit if the attacker is within 5 feet of the creature."},{condition:"Petrified",effect:"A petrified creature is transformed, along with any nonmagical object it is wearing or carrying, into a solid inanimate substance (usually stone). Its weight increases by a factor of ten, and it ceases aging. The creature is incapacitated (see the condition), can't move or speak, and is unaware of its surroundings. Attack rolls against the creature have advantage. The creature automatically fails Strength and Dexterity saving throws. The creature has resistance to all damage. The creature is immune to poison and disease, although a poison or disease already in its system is suspended, not neutralized."},{condition:"Poisoned",effect:"A poisoned creature has disadvantage on attack rolls and ability checks."},{condition:"Prone",effect:"A prone creature's only movement option is to crawl, unless it stands up and thereby ends the condition. The creature has disadvantage on attack rolls. An attack roll against the creature has advantage if the attacker is within 5 feet of the creature. Otherwise, the attack roll has disadvantage."},{condition:"Restrained",effect:"A restrained creature's speed becomes 0, and it can't benefit from any bonus to its speed. Attack rolls against the creature have advantage, and the creature's attack rolls have disadvantage. The creature has disadvantage on Dexterity saving throws."},{condition:"Stunned",effect:"A stunned creature is incapacitated (see the condition), can't move, and can speak only falteringly. The creature automatically fails Strength and Dexterity saving throws. Attack rolls against the creature have advantage."},{condition:"Unconscious",effect:"An unconscious creature is incapacitated (see the condition), can't move or speak, and is unaware of its surroundings The creature drops whatever it's holding and falls prone. The creature automatically fails Strength and Dexterity saving throws. Attack rolls against the creature have advantage. Any attack that hits the creature is a critical hit if the attacker is within 5 feet of the creature."}]}},cover:{cover:{headers:["cover","effect"],rows:[{cover:"Half cover",effect:"+2 to AC and Dexterity saving throws"},{cover:"Three-quarters cover",effect:"+5 to AC and Dexterity saving throws"},{cover:"Full cover",effect:"Cannot be targeted directly by an attack or spell"}]}},actions:{actions:{headers:["action","description"],rows:[{action:"Attack",description:"Make a melee or ranged attack. See the attacks section for more details."},{action:"Cast",description:"You cast a cantrip or leveled spell. See the spells casting time. You can only cast one leveled spell per turn, but you can cast another leveled spell as a reaction."},{action:"Dash",description:"Gain extra movement equal to your speed for the turn. This movement happens after your normal movement."},{action:"Disengage",description:"Your movement does not provoke opportunity attacks for the turn."},{action:"Dodge",description:"Until the start of your next turn, any attack roll made against you has disadvantage if you can see the attacker, and you make Dexterity saving throws with advantage. You lose this benefit if you are incapacitated or if your speed drops to 0."},{action:"Grapple",description:"(1 melee attack) You make a Strength (Athletics) check contested by the target's Strength (Athletics) or Dexterity (Acrobatics) check. If you win the contest, you grapple the target."},{action:"Help",description:"You aid another creature in making a skill check or attack roll. The target gains advantage on the next ability check or attack roll it makes before the start of your next turn."},{action:"Hide",description:"You make a Dexterity (Stealth) check in an attempt to become hidden. While hidden you have advantage on attacks and attacks against you have disadvantage."},{action:"Ready",description:"You wait for a particular circumstance before you act, which let's you use your reaction before the start of your next turn. You must decide in advance what circumstance will trigger your reaction and what action you will take in response ot the trigger. If you ready a spell it must have a casting time of 1 action and you must concentrate on it until you release it."},{action:"Search",description:"You make a Wisdom (Perception) check or Intelligence (Investigation) check to find something."},{action:"Shove",description:"(1 melee attack) You make a Strength (Athletics) check contested by the target's Strength (Athletics) or Dexterity (Acrobatics) check. If you win the contest, you either knock the target prone or push it 5 feet away from you."},{action:"Use a magic item",description:"You use a magic item that requires an action to use."},{action:"Use an object",description:"You use an object that requires an action to use."},{action:"Use a special ability",description:"You use a special ability that requires an action to use."}]}},"setting a dc":{"setting-a-dc":{headers:["difficulty","dc"],rows:[{difficulty:"Very easy",dc:"5"},{difficulty:"Easy",dc:"10"},{difficulty:"Moderate",dc:"15"},{difficulty:"Hard",dc:"20"},{difficulty:"Very hard",dc:"25"},{difficulty:"Nearly impossible",dc:"30"}]}},"tracking dc":{"tracking-dc":{headers:["ground conditions","dc"],rows:[{"ground conditions":"Soft surfaces such as snow",dc:"10"},{"ground conditions":"Dirt or grass",dc:"15"},{"ground conditions":"Bare stone",dc:"20"},{"ground conditions":"Each day since the creature passed",dc:"+5"},{"ground conditions":"Creature left a trail such as blood",dc:"-5"}]}},"object ac":{"object-ac":{headers:["substance","ac"],rows:[{substance:"Cloth, paper, rope",ac:"11"},{substance:"Crystal, glass, ice",ac:"13"},{substance:"Wood, bone",ac:"15"},{substance:"Stone",ac:"17"},{substance:"Iron, steel",ac:"19"},{substance:"Mithral",ac:"21"},{substance:"Adamantine",ac:"23"}]}},"object hp":{"object-hp":{headers:["size","fragile","resilient"],rows:[{size:"Tiny (bottle, lock)",fragile:"2 (1d4)",resilient:"5 (2d4)"},{size:"Small (chest, lute)",fragile:"3 (1d6)",resilient:"10 (3d6)"},{size:"Medium (barrel, chandelier)",fragile:"4 (1d8)",resilient:"18 (4d8)"},{size:"Large (cart, 10x10 ft. window)",fragile:"5 (1d10)",resilient:"27 (5d10)"},{size:"Huge (rowboat, statue)",fragile:"6 (1d12)",resilient:"40 (6d12)"},{size:"Gargantuan (sailing ship, castle wall)",fragile:"7 (2d6)",resilient:"50 (7d10)"}]}},"food and drink":{"food-and-drink":{headers:["food","cost"],rows:[{food:"Ale, gallon",cost:"2 sp"},{food:"Ale, pint",cost:"4 cp"},{food:"Wine, common (pitcher)",cost:"2 sp"},{food:"Wine, fine (bottle)",cost:"10 gp"},{food:"Banquet (per person)",cost:"10 gp"},{food:"Bread, loaf",cost:"2 cp"},{food:"Cheese, hunk",cost:"1 sp"},{food:"Inn stay (per day, poor)",cost:"2 sp"},{food:"Inn stay (per day)",cost:"5 sp"},{food:"Inn stay (per day, wealthy)",cost:"2 gp"},{food:"Meal (per day, poor)",cost:"3 sp"},{food:"Meal (per day)",cost:"5 sp"},{food:"Meal (per day, wealthy)",cost:"8 sp"}]}},"services and transportation":{"services-and-transportation":{headers:["service","cost"],rows:[{service:"Coach cab (per mile)",cost:"3 cp"},{service:"Coach hire (per day)",cost:"1 gp"},{service:"Hireling, trained (per day)",cost:"2 gp"},{service:"Hireling, untrained (per day)",cost:"2 sp"},{service:"Messenger (per mile)",cost:"2 cp"},{service:"Road or gate toll",cost:"1 cp"},{service:"Ship's passage (per day)",cost:"1 sp"}]}},"travel pace":{"travel-pace":{description:"Distance per...",headers:["pace","distance per minute","distance per hour","distance per day","effect"],rows:[{pace:"slow","distance per minute":"200 ft.","distance per hour":"2 miles","distance per day":"18 miles",effect:"Able to use stealth"},{pace:"normal","distance per minute":"300 ft.","distance per hour":"3 miles","distance per day":"24 miles",effect:"No effect"},{pace:"fast","distance per minute":"400 ft.","distance per hour":"4 miles","distance per day":"30 miles",effect:"-5 penalty to passive Wisdom (Perception) scores"}]}}},St=Object.keys(Ct),Na={strength:"Measures physical power. Skills: Athletics",dexterity:"Measures agility. Skills: Acrobatics, Sleight of Hand, Stealth",constitution:"Measures endurance. Skills: Concentration",intelligence:"Measures reasoning and memory. Skills: Arcana, History, Investigation, Nature, Religion",wisdom:"Measures perception and insight. Skills: Animal Handling, Insight, Medicine, Perception, Survival",charisma:"Measures force of personality. Skills: Deception, Intimidation, Performance, Persuasion","encounter distance":"Wilderness encounter distance based on visibility and terrain.",conditions:"A list of conditions and their effects.",cover:"Effects of cover. Cover: Half cover, Three-quarters cover, Full cover",actions:"Available actions in combat.","setting a dc":"Guidlines for setting DC of an ability check.","tracking dc":"Guidlines for setting DC of tracking based on ground conditions.","object ac":"Armor class of objects based on substance.","object hp":"Hit points of objects based on size.","food and drink":"Prices of food and drink.","services and transportation":"Prices of services and transportation.","travel pace":"Distance and effects based on travel pace."},ht=St.map((t,a)=>({id:`rule-${t}`,content:{title:t},column:`droppable-${a%4+1}`,tab:oe[0],type:h.Rule})),kt=()=>{l.useEffect(()=>{localStorage.getItem("cards")===null&&localStorage.setItem("cards",JSON.stringify(ht))},[]);const[t,a]=et("cards",ht),n={"droppable-1":[],"droppable-2":[],"droppable-3":[],"droppable-4":[]};return[t.reduce((r,c)=>(r[c.column].push(c),r),n),r=>{a(Object.values(r).flat())}]},Ha=Gt("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Oa=({setTabs:t,activeTab:a,setActiveTab:n})=>{const s=l.useRef(null),[i,r]=l.useState(null),c=()=>{var S;(S=s.current)==null||S.click()},[u,p]=kt(),x=()=>{const S=localStorage.getItem("cards"),j=`data:text/json;chatset=utf-8,${encodeURIComponent(JSON.stringify(S))}`,k=document.createElement("a");k.setAttribute("href",j),k.setAttribute("download","dmscreen.json"),document.body.appendChild(k),k.click(),k.remove()},f=S=>{var P;const k=(P=S.target.files)==null?void 0:P[0],z=new FileReader;z.onload=ee=>{var _;if(k&&Ra(k)){const X=JSON.parse(JSON.parse((_=ee.target)==null?void 0:_.result)),R=X.map(U=>U.tab)??oe;t([...new Set(R)]),p(ct(X)),n(R[0])}else r(ne.FileType)},z.readAsText(k)},o=()=>{r(null)},y=()=>{i===ne.Upload?c():i===ne.Reset&&(p(ct([])),n(a)),r(null)},M=()=>r(ne.Upload),B=()=>r(ne.Reset);return e.jsxs(e.Fragment,{children:[e.jsx(je,{onClick:x,sx:{mr:2,color:De},"data-testid":"download-button",children:e.jsx(Jt,{})}),e.jsxs(je,{onClick:M,sx:{mr:2,color:De},"data-testid":"upload-button",children:[e.jsx(Ha,{ref:s,type:"file",onChange:f,"data-testid":"file-input"}),e.jsx(Xt,{})]}),e.jsx(je,{onClick:B,sx:{mr:2,color:De},"data-testid":"reset-button",children:e.jsx(Kt,{})}),i&&e.jsx(Fa,{dialogOpen:!!i,dialogMessage:i?La[i]:"",handleCancel:o,handleConfirm:y,confirmOnly:i===ne.FileType})]})},Wa=({setTabs:t,activeTab:a,setActiveTab:n})=>e.jsx(Qt,{position:"static","data-testid":"header",children:e.jsxs(Zt,{children:[e.jsx(d,{variant:"mainTitle",sx:{flexGrow:1,[Y.breakpoints.down(G.md)]:{fontSize:Y.spacing(4)}},children:"DM Screen"}),e.jsx(Oa,{setTabs:t,activeTab:a,setActiveTab:n})]})}),za=({content:t})=>{const a=E(),{readOutLoudText:n=""}=t??"";return e.jsx(v,{sx:{bgcolor:a.palette.Map.light,pb:2,px:1,borderRadius:2,height:"100%",overflow:"hidden",fontSize:14},"data-testid":"small-map-card",children:e.jsx(tt,{children:n.length>200?`${n.substring(0,200)}...`:n})})},_a=({content:t})=>{const{notes:a=""}=t??"";return e.jsx(v,{sx:{px:1,height:"100%",fontSize:14,overflow:"hidden"},"data-testid":"small-note-card",children:e.jsx(tt,{children:a.length>300?`${a.substring(0,300)}...`:a})})},Tt=({labels:t,values:a})=>{const n=t.map((s,i)=>[s,a[i]]);return e.jsx(ft,{component:v,children:e.jsx(vt,{"aria-label":"stat-table",children:e.jsx(yt,{children:n.map(s=>e.jsxs(Ze,{sx:{marginBottom:1},children:[e.jsx(Le,{sx:{verticalAlign:"top",fontWeight:900,marginBottom:1,paddingY:0,paddingLeft:0,border:"none"},children:s[0]},s[0]),e.jsx(Le,{sx:{verticalAlign:"top",padding:0,border:"none"},children:s[1]},s[1])]},s[0]))})})})},Ua=({content:t})=>{const a=E(),{charClass:n="",charRace:s="",charBackground:i="",charLevel:r="",ac:c="",passivePerception:u="",passiveStealth:p="",spellSaveDC:x="",spellAttackBonus:f="",languages:o=""}=t??{},y=["AC: ","Passive Perception: ","Passive Stealth: ","Languages: ","Spell Save DC: ","Spell Attack Bonus: "],M=[c,u,p,o,x,f];return e.jsxs(v,{"data-testid":"small-player-card",children:[e.jsxs(v,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:`solid 1px ${a.palette.Player.dark}`,mb:1},children:[e.jsxs(d,{component:"span",sx:{color:a.palette.Player.dark},children:["Level ",r," ",s," ",n]}),e.jsx(d,{component:"span",sx:{color:a.palette.Player.dark},children:i})]}),e.jsx(v,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:e.jsx(Tt,{labels:y,values:M})})]})},$a=({content:t})=>{const a=E(),{size:n="",type:s="",challengeRating:i="",senses:r="",proficiencies:c="",languages:u="",speed:p=""}=t??{},x=["Speed: ","Languages: ","Senses: ","Proficiencies: "],f=[p,u,r,c];return e.jsxs(v,{"data-testid":"small-player-card",children:[e.jsxs(v,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:`solid 1px ${a.palette.Monster.dark}`,marginBottom:1},children:[e.jsxs(d,{component:"span",sx:{color:a.palette.Monster.dark},children:[n," ",s]}),e.jsxs(d,{component:"span",sx:{color:a.palette.Monster.dark},children:["CR ",i]})]}),e.jsx(v,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:e.jsx(Tt,{labels:x,values:f})})]})},Va=({content:t})=>{const{title:a}=t??{},n=Na[a];return e.jsx(v,{sx:{py:2,px:1},"data-testid":"small-rule-card",children:n&&e.jsx(d,{children:n})})},Ya=({id:t,content:a,type:n,handleContextMenuOpen:s})=>{const i=E(),r=()=>{switch(n){case h.Map:const u=a??{};return(u==null?void 0:u.roomNumber)??"X";case h.Note:return e.jsx(ra,{});case h.Rule:return e.jsx(na,{});case h.Player:return e.jsx(ia,{});case h.Monster:return e.jsx(sa,{});default:return a.title.charAt(0).toUpperCase()}},c=()=>{switch(n){case h.Map:return e.jsx(za,{content:a});case h.Note:return e.jsx(_a,{content:a});case h.Player:return e.jsx(Ua,{content:a});case h.Monster:return e.jsx($a,{content:a});case h.Rule:return e.jsx(Va,{content:a});default:return e.jsx(d,{children:"TODO: what should this be?"})}};return e.jsxs(ea,{sx:{width:"100%",zIndex:"0",margin:"8px 0",minHeight:"250px",height:"250px"},onContextMenu:u=>{u.preventDefault(),s(u,t)},"data-testid":"basic-card",children:[e.jsx(ta,{avatar:e.jsx(bt,{"aria-label":"avatar",sx:{bgcolor:i.palette[n].main,fontWeight:"bold"},children:r()}),title:a.title?le(a.title):"",titleTypographyProps:{fontSize:16,fontWeight:500}}),e.jsx(aa,{sx:{py:0,height:"70%"},children:c()})]})},qa=({card:t,index:a,expandCard:n,handleContextMenuOpen:s})=>{const i=()=>{n(t.id)};return e.jsx(Ot,{draggableId:t.id,index:a,children:(r,c)=>e.jsx("div",{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,onClick:i,"data-testid":"draggable-card",children:e.jsx(Ya,{id:t.id,type:t.type,content:t.content,handleContextMenuOpen:s},t.id)})},t.id)},Mt=()=>{const[t,a]=l.useState(dt());return l.useEffect(()=>{if(typeof window<"u"){const n=()=>{a(dt())};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}},[]),t},Ae=({cards:t,columnId:a,expandCard:n,handleContextMenuOpen:s})=>{const i=Mt(),r=E(),c=Pa(i),u=Da[c];return e.jsx(v,{"data-testid":"column",sx:{width:(i.width-16)/u,paddingLeft:r.spacing(1),paddingRight:r.spacing(1),[r.breakpoints.up(G.lg)]:{height:"100%"},[r.breakpoints.down(G.lg)]:{borderBottom:`2px dashed ${r.palette.grey[300]}`}},children:e.jsx(Wt,{droppableId:`droppable-${a}`,children:(p,x)=>e.jsxs("div",{...p.droppableProps,ref:p.innerRef,children:[t.map((f,o)=>e.jsx(qa,{card:f,index:o,expandCard:n,handleContextMenuOpen:s},f.id)),p.placeholder]})})})},A=({id:t,sxOverrides:a={},children:n})=>{const s={display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"};return e.jsx(v,{id:t,sx:{...s,...a},children:n})},It="/dm-screen/assets/nat-one-ead81065.svg";class Ga extends l.Component{constructor(){super(...arguments);qe(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,s){console.error("Uncaught error:",n,s)}render(){return this.state.hasError?e.jsxs(e.Fragment,{children:[e.jsxs(A,{sxOverrides:{alignItems:"center",p:2,mb:2},children:[e.jsx(d,{id:"card-title",variant:"cardHeader","data-testid":"title-view",children:"You rolled a 1... Please delete this card and recreate it."}),e.jsx(je,{"aria-label":"delete-button","data-testid":"delete-button",onClick:this.props.deleteCard,children:e.jsx(at,{})})]}),e.jsx(v,{sx:{display:"flex",flexDirection:"column",alignItems:"center",m:"auto",overflowY:"hidden"},"data-testId":"card-error-boundry",children:e.jsx("img",{width:"100%",src:It,alt:"a twenty sided die showing a one."})})]}):this.props.children}}const V=({sxOverrides:t={},children:a})=>e.jsx(v,{sx:{display:"flex",flexDirection:"column",overflowY:"scroll",...t},children:a}),st=({isVisible:t,close:a,children:n})=>e.jsx(mt,{open:!!t,onClose:a,"data-testid":"expanded-card",children:e.jsx(v,{sx:s=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",height:"80%",backgroundColor:s.palette.background.paper,border:"none",borderRadius:s.spacing(1.5),boxShadow:"24px",padding:s.spacing(4),display:"flex",flexDirection:"column"}),children:n})}),At=({isEdit:t,handleLeftButton:a,handleRightButton:n})=>{const s=E();return e.jsxs(A,{id:"card-actions",sxOverrides:i=>({padding:i.spacing(2)}),children:[e.jsxs(J,{variant:"outlined",sx:{justifyContent:"center",width:s.spacing(15),"& svg":{marginLeft:s.spacing(1)}},"aria-label":t?"delete-button":"cancel-button",onClick:a,"data-testid":"left-button",children:[t?"Delete":"Cancel",t&&e.jsx(at,{})]}),e.jsxs(J,{variant:"contained",sx:{alignSelf:"center",justifyContent:"center",width:s.spacing(15),marginLeft:"auto","& svg":{marginLeft:s.spacing(1)}},"aria-label":"edit-save-button",onClick:n,"data-testid":"right-button",children:["Save",e.jsx(xt,{})]})]})},Ce=({cardData:t,closeExpandedCard:a,deleteCard:n,isEditing:s,saveCard:i,children:r})=>{const c=()=>{n(t),a()},u=()=>{a()};return e.jsxs(st,{isVisible:t.id!==null,close:u,children:[e.jsx(V,{sxOverrides:{width:"100%"},children:e.jsx(Ga,{deleteCard:c,children:r})}),s&&e.jsx(At,{isEdit:!0,handleLeftButton:c,handleRightButton:i})]})},q=({label:t,value:a="",cardType:n,bgFill:s})=>{const i=E();return e.jsxs(v,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(d,{variant:"cardSectionLabel",sx:{color:n?i.palette[n].main:Aa},children:[t,":"]}),e.jsx(v,{sx:{paddingLeft:i.spacing(1),paddingRight:i.spacing(1),width:"100%",height:"100%",minHeight:i.spacing(40),border:`1px solid ${i.palette[n].main}`,backgroundColor:s?i.palette[n].light:i.palette.background.paper,borderRadius:i.spacing(1)},children:e.jsx(tt,{children:a})})]})},Se=({title:t,handleEdit:a,children:n})=>e.jsxs(A,{id:"card-header",sxOverrides:{padding:0},children:[n,e.jsx(d,{id:"card-title",variant:"cardHeader","data-testid":"title-view",children:t}),e.jsx(je,{sx:{width:"fit-content",marginLeft:"auto"},"aria-label":"edit-save-button","data-testid":"edit-button",onClick:a,children:e.jsx(la,{})})]}),N=({type:t})=>{const a=E(),n={marginTop:a.spacing(2),marginBottom:a.spacing(4),background:a.palette[t].dark};return e.jsx(we,{sx:n})},Dt=({content:t,setContent:a})=>e.jsxs("div",{"data-testid":"note-form",children:[e.jsx(g,{id:"title",label:"Title",sx:{paddingBottom:2},fullWidth:!0,variant:"outlined",value:t.title,onChange:n=>a({...t,title:n.target.value}),"data-testid":"title-input"}),e.jsx(N,{type:h.Note}),e.jsx(g,{id:"notes",label:"Notes",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.notes,onChange:n=>a({...t,notes:n.target.value}),"data-testid":"notes-input"})]}),Ja=({closeExpandedCard:t,expandedCardData:a,updateCard:n,deleteCard:s})=>{const i=a.content,[r,c]=l.useState(!1),[u,p]=l.useState(i.title),[x,f]=l.useState(i.notes),o={title:u,notes:x},y=()=>{r&&n({...a,content:{...o}}),c(!r)},M=B=>{p(B.title),f(B.notes)};return e.jsx(Ce,{cardData:a,closeExpandedCard:t,deleteCard:s,isEditing:r,saveCard:y,children:r?e.jsxs(e.Fragment,{children:[e.jsx(d,{id:"note-card-title",variant:"cardHeader",children:"Editing"}),e.jsx(v,{children:e.jsx(Dt,{content:o,setContent:M})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:u,handleEdit:y}),e.jsx(V,{children:e.jsx(q,{label:"Notes",value:x,cardType:h.Note})})]})})},Lt=({content:t,setContent:a})=>e.jsxs("div",{"data-testid":"map-form",children:[e.jsxs(A,{children:[e.jsx(g,{id:"room-number",label:"Room Number",sx:{paddingBottom:2,paddingRight:2,maxWidth:150},variant:"outlined",value:t.roomNumber,onChange:n=>a({...t,roomNumber:n.target.value}),"data-testid":"room-number-input"}),e.jsx(g,{id:"title",label:"Title",sx:{paddingBottom:2},fullWidth:!0,variant:"outlined",value:t.title,onChange:n=>a({...t,title:n.target.value}),"data-testid":"title-input"})]}),e.jsx(N,{type:h.Map}),e.jsx(g,{id:"read-out-loud-text",label:"Read Out Loud",fullWidth:!0,sx:{paddingBottom:2},variant:"outlined",multiline:!0,rows:18,value:t.readOutLoudText,onChange:n=>a({...t,readOutLoudText:n.target.value}),"data-testid":"read-out-loud-text-input"}),e.jsx(N,{type:h.Map}),e.jsx(g,{id:"notes",label:"DM Notes",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.notes,onChange:n=>a({...t,notes:n.target.value}),"data-testid":"notes-input"})]}),Xa=({closeExpandedCard:t,expandedCardData:a,updateCard:n,deleteCard:s})=>{const i=E(),r=a.content,[c,u]=l.useState(!1),[p,x]=l.useState(r.title),[f,o]=l.useState(r.notes),[y,M]=l.useState(r.roomNumber),[B,S]=l.useState(r.readOutLoudText),j={title:p,roomNumber:y,readOutLoudText:B,notes:f},k=P=>{x(P.title),o(P.notes),M(P.roomNumber),S(P.readOutLoudText)},z=()=>{c&&n({...a,content:{...j}}),u(!c)};return e.jsx(Ce,{cardData:a,closeExpandedCard:t,deleteCard:s,isEditing:c,saveCard:z,children:c?e.jsxs(e.Fragment,{children:[e.jsx(d,{id:"map-card-title",variant:"cardHeader",children:"Editing"}),e.jsx(V,{children:e.jsx(Lt,{content:j,setContent:k})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:p,handleEdit:z,children:e.jsx(bt,{"aria-label":"avatar",sx:{bgcolor:i.palette.Map.light,width:60,height:60},"data-testid":"room-number-view",children:y||"X"})}),e.jsxs(V,{children:[e.jsx(q,{label:"Read Out Loud",value:B,cardType:h.Map,bgFill:!0}),e.jsx(q,{label:"DM Notes",value:f,cardType:h.Map})]})]})})},I=({sxOverrides:t={},children:a})=>{const n={display:"flex",flexDirection:"column",justifyContent:"space-around",width:"100%"};return e.jsx(v,{sx:{...n,...t},children:a})},Bt=({content:t,setContent:a})=>{const n=s=>{a({title:s.target.value})};return e.jsx("div",{"data-testid":"rule-form",children:e.jsxs(I,{sxOverrides:{p:0},children:[e.jsx(Pe,{id:"rule-select-label",children:"Rule*"}),e.jsx(Re,{labelId:"rule-select-label",sx:{marginBottom:2,width:"100%"},id:"rule-select",value:t.title,"data-testid":"rule-select",onChange:s=>{n(s)},children:St.map(s=>e.jsx(Z,{value:s,"data-testid":"select-option",children:le(s)},s))})]})})},Ka=({description:t})=>e.jsx(v,{sx:{width:"100%",border:`solid 1px ${Y.palette.Rule.dark}`,borderBottom:"none"},children:typeof t=="string"?e.jsx(v,{sx:{width:"100%",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start"},children:e.jsx(d,{id:"desc-sentence",sx:a=>({marginLeft:"auto",padding:a.spacing(1),width:"100%"}),children:t})}):e.jsx(e.Fragment,{children:Object.keys(t).map(a=>e.jsxs(v,{sx:{width:"100%",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start"},"data-testid":"desc-row",children:[e.jsxs(d,{id:"desc-key",sx:n=>({fontWeight:"bold",paddingLeft:n.spacing(10),width:"25%"}),children:[le(a),":"]}),e.jsx(d,{sx:{marginLeft:"auto",width:"70%"},id:"desc-value",children:t[a]})]},a))})}),Qa=({subRule:t,tableData:a})=>{const{headers:n,rows:s}=a,i=a.description,r=String.fromCharCode(183),c=le(t," "," "+r+" "),u=le(c,"-"," ");return e.jsxs(v,{sx:p=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:p.spacing(2),paddingRight:p.spacing(2),marginBottom:p.spacing(2),width:"100%"}),"data-testid":"table-section",children:[e.jsx(v,{sx:p=>({width:"100%",textAlign:"center",marginTop:p.spacing(1)}),children:e.jsx(d,{id:"skill-name",variant:"h4",component:"h4","data-testid":"table-name",children:u})}),i&&e.jsx(Ka,{description:a.description??""}),e.jsx(ft,{component:v,children:e.jsxs(vt,{"aria-label":"rule-table",children:[e.jsx(oa,{children:e.jsx(Ze,{sx:{border:`1px solid ${Y.palette.Rule.dark}`,"& th":{fontWeight:"bold",backgroundColor:Y.palette.Rule.light,border:"none"}},children:n.map(p=>e.jsx(Le,{children:le(p)},p))})}),e.jsx(yt,{children:s.map((p,x)=>e.jsx(Ze,{sx:{border:`1px solid ${Y.palette.Rule.dark}`,"& td":{border:"none",background:x%2===0?Y.palette.background.paper:Y.palette.Rule.light}},children:n.map(f=>e.jsx(Le,{children:p[f]},p[f]))},p[n[0]]))})]})})]})},Za=({closeExpandedCard:t,expandedCardData:a,updateCard:n,deleteCard:s})=>{const i=a.content,[r,c]=l.useState(!1),[u,p]=l.useState(i.title),x=Ct[u],f=Object.keys(x),o=()=>{r&&n({...a,content:{title:u}}),c(!r)};return e.jsx(Ce,{cardData:a,closeExpandedCard:t,deleteCard:s,isEditing:r,saveCard:o,children:r?e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(d,{id:"rule-card-title",variant:"h3",component:"h3","data-testid":"title-view",sx:y=>({width:"100%",margin:y.spacing(4),paddingLeft:y.spacing(2),paddingRight:y.spacing(2),paddingTop:y.spacing(1.5)}),children:"Choose Rule"})}),e.jsx(Bt,{content:{title:u},setContent:y=>p(y.title)})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:le(u),handleEdit:o}),e.jsx(V,{children:f.map(y=>e.jsx(Qa,{subRule:y,tableData:x[y]},y))})]})})},Pt=({content:t,setContent:a})=>{const n={paddingBottom:2,maxWidth:70};return e.jsxs("div",{"data-testid":"player-form",children:[e.jsx(g,{id:"title",label:"Character Name",sx:{paddingBottom:2},fullWidth:!0,variant:"outlined",value:t.title,onChange:s=>a({...t,title:s.target.value})}),e.jsxs(A,{children:[e.jsx(g,{id:"race",label:"Race",sx:{paddingBottom:2},variant:"outlined",value:t.charRace,onChange:s=>a({...t,charRace:s.target.value})}),e.jsx(g,{id:"class",label:"Class",sx:{paddingBottom:2},variant:"outlined",value:t.charClass,onChange:s=>a({...t,charClass:s.target.value})}),e.jsx(g,{id:"level",label:"Level",sx:{paddingBottom:2},variant:"outlined",value:t.charLevel,onChange:s=>a({...t,charLevel:s.target.value})}),e.jsx(g,{id:"background",label:"Background",sx:{paddingBottom:2},variant:"outlined",value:t.charBackground,onChange:s=>a({...t,charBackground:s.target.value})}),e.jsx(g,{id:"size",label:"Size",sx:{paddingBottom:2},variant:"outlined",value:t.size,onChange:s=>a({...t,size:s.target.value})})]}),e.jsx(N,{type:h.Player}),e.jsxs(A,{children:[e.jsx(g,{id:"strength",label:"STR",sx:n,variant:"outlined",value:t.strength,onChange:s=>a({...t,strength:s.target.value})}),e.jsx(g,{id:"dexterity",label:"DEX",sx:n,variant:"outlined",value:t.dexterity,onChange:s=>a({...t,dexterity:s.target.value})}),e.jsx(g,{id:"constitution",label:"CON",sx:n,variant:"outlined",value:t.constitution,onChange:s=>a({...t,constitution:s.target.value})}),e.jsx(g,{id:"intelligence",label:"INT",sx:n,variant:"outlined",value:t.intelligence,onChange:s=>a({...t,intelligence:s.target.value})}),e.jsx(g,{id:"wisdom",label:"WIS",sx:n,variant:"outlined",value:t.wisdom,onChange:s=>a({...t,wisdom:s.target.value})}),e.jsx(g,{id:"charisma",label:"CHA",sx:n,variant:"outlined",value:t.charisma,onChange:s=>a({...t,charisma:s.target.value})})]}),e.jsx(N,{type:h.Player}),e.jsxs(A,{children:[e.jsx(g,{id:"hitpoints",label:"HP",sx:{paddingBottom:2},variant:"outlined",value:t.hp,onChange:s=>a({...t,hp:s.target.value})}),e.jsx(g,{id:"armor-class",label:"AC",sx:{paddingBottom:2},variant:"outlined",value:t.ac,onChange:s=>a({...t,ac:s.target.value})})]}),e.jsx(N,{type:h.Player}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(g,{id:"passive-perception",label:"Passive Perception",sx:{paddingBottom:2},variant:"outlined",value:t.passivePerception,onChange:s=>a({...t,passivePerception:s.target.value})}),e.jsx(g,{id:"passive-investigation",label:"Passive Investigation",sx:{paddingBottom:2},variant:"outlined",value:t.passiveInvestigation,onChange:s=>a({...t,passiveInvestigation:s.target.value})}),e.jsx(g,{id:"passive-stealth",label:"Passive Stealth",sx:{paddingBottom:2},variant:"outlined",value:t.passiveStealth,onChange:s=>a({...t,passiveStealth:s.target.value})}),e.jsx(g,{id:"passive-insight",label:"Passive Insight",sx:{paddingBottom:2},variant:"outlined",value:t.passiveInsight,onChange:s=>a({...t,passiveInsight:s.target.value})})]}),e.jsxs(I,{children:[e.jsx(g,{id:"spell-casting-ability",label:"Spell Casting Ability",sx:{paddingBottom:2},variant:"outlined",value:t.spellCastingAbility,onChange:s=>a({...t,spellCastingAbility:s.target.value})}),e.jsx(g,{id:"spell-casting-modifier",label:"Spell Casting Modifier",sx:{paddingBottom:2},variant:"outlined",value:t.spellCastingModifier,onChange:s=>a({...t,spellCastingModifier:s.target.value})}),e.jsx(g,{id:"spell-save-dc",label:"Spell Save DC",sx:{paddingBottom:2},variant:"outlined",value:t.spellSaveDC,onChange:s=>a({...t,spellSaveDC:s.target.value})}),e.jsx(g,{id:"spell-attack-bonus",label:"Spell Attack Bonus",sx:{paddingBottom:2},variant:"outlined",value:t.spellAttackBonus,onChange:s=>a({...t,spellAttackBonus:s.target.value})})]})]}),e.jsx(N,{type:h.Player}),e.jsxs(I,{children:[e.jsx(g,{id:"speed",label:"Speed",sx:{paddingBottom:2},variant:"outlined",value:t.speed,onChange:s=>a({...t,speed:s.target.value})}),e.jsx(g,{id:"languages",label:"Languages",fullWidth:!0,sx:{paddingBottom:2},variant:"outlined",value:t.languages,onChange:s=>a({...t,languages:s.target.value})}),e.jsx(g,{id:"link",label:"Character Sheet Link",fullWidth:!0,sx:{paddingBottom:2},variant:"outlined",value:t.link,onChange:s=>a({...t,link:s.target.value})})]}),e.jsx(N,{type:h.Player}),e.jsx(g,{id:"notes",label:"Notes",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.notes,onChange:s=>a({...t,notes:s.target.value})})]})},L=({label:t,value:a,isVertical:n=!1})=>{const s=E(),i=a&&/(http(s?)):\/\//i.test(a),r={position:"relative",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:s.spacing(3),width:s.spacing(12),height:s.spacing(12)},c={display:"flex",flexDirection:"row",alignItems:"flex-start",padding:s.spacing(1)};return e.jsxs(v,{sx:n?r:c,children:[e.jsxs(d,{variant:"fieldLabel",sx:{marginRight:s.spacing(1)},children:[t,":"]}),i?e.jsx("a",{href:a,target:"_blank",children:e.jsx(d,{variant:"fieldValue",children:a})}):e.jsx(d,{variant:"fieldValue",children:a})]})},Be=({label:t,value:a,cardType:n})=>{const s=E(),i={position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1,color:s.palette[n].main};return e.jsxs(I,{sxOverrides:{position:"relative",alignItems:"center",justifyContent:"center",width:s.spacing(16),height:s.spacing(16)},children:[e.jsx(d,{variant:"fieldLabel",sx:{zIndex:2},children:t}),e.jsx(d,{variant:"fieldValue",sx:{zIndex:2},children:a}),t==="HP"&&e.jsx(da,{style:i}),t==="AC"&&e.jsx(ca,{style:i})]})},W=({label:t,value:a,cardType:n})=>{const s=E(),i=a?Math.floor((parseInt(a)-10)/2):0;return e.jsxs(I,{sxOverrides:{alignItems:"center",justifyContent:"center",width:s.spacing(12),height:s.spacing(12),border:`1px solid ${s.palette[n].main}`,borderRadius:s.spacing(1)},children:[e.jsx(d,{variant:"fieldLabel",children:t}),e.jsxs(d,{variant:"fieldValue",children:[a," (",i>=0?"+":"",i,")"]})]})},es=({closeExpandedCard:t,expandedCardData:a,updateCard:n,deleteCard:s})=>{const i=a.content,[r,c]=l.useState(!1),[u,p]=l.useState(i.title),[x,f]=l.useState(i.notes),[o,y]=l.useState(i.charClass),[M,B]=l.useState(i.charLevel),[S,j]=l.useState(i.charRace),[k,z]=l.useState(i.charBackground),[P,ee]=l.useState(i.size),[_,X]=l.useState(i.hp),[R,U]=l.useState(i.ac),[te,K]=l.useState(i.strength),[ae,m]=l.useState(i.dexterity),[b,T]=l.useState(i.constitution),[D,F]=l.useState(i.intelligence),[H,Q]=l.useState(i.wisdom),[O,$]=l.useState(i.charisma),[de,Ee]=l.useState(i.passivePerception),[fe,Fe]=l.useState(i.passiveInvestigation),[ce,Ne]=l.useState(i.passiveStealth),[ue,He]=l.useState(i.passiveInsight),[he,Oe]=l.useState(i.speed),[pe,We]=l.useState(i.spellCastingAbility),[ge,ze]=l.useState(i.spellCastingModifier),[me,_e]=l.useState(i.spellSaveDC),[se,Ue]=l.useState(i.spellAttackBonus),[ie,$e]=l.useState(i.link),[ve,Ve]=l.useState(i.languages),ke={title:u,hp:_,ac:R,size:P,strength:te,dexterity:ae,constitution:b,intelligence:D,wisdom:H,charisma:O,charClass:o,charLevel:M,charRace:S,charBackground:k,passivePerception:de,passiveStealth:ce,passiveInvestigation:fe,passiveInsight:ue,speed:he,spellCastingAbility:pe,spellCastingModifier:ge,spellSaveDC:me,spellAttackBonus:se,languages:ve,link:ie,notes:x},Ye=C=>{p(C.title),f(C.notes),y(C.charClass),B(C.charLevel),j(C.charRace),z(C.charBackground),ee(C.size),X(C.hp),U(C.ac),K(C.strength),m(C.dexterity),T(C.constitution),F(C.intelligence),Q(C.wisdom),$(C.charisma),Ee(C.passivePerception),Fe(C.passiveInvestigation),Ne(C.passiveStealth),He(C.passiveInsight),Oe(C.speed),We(C.spellCastingAbility),ze(C.spellCastingModifier),_e(C.spellSaveDC),Ue(C.spellAttackBonus),$e(C.link),Ve(C.languages)},ye=()=>{r&&n({...a,content:{title:u,hp:_,ac:R,charClass:o,charLevel:M,charRace:S,charBackground:k,passivePerception:de,passiveStealth:ce,passiveInsight:ue,speed:he,spellCastingAbility:pe,spellCastingModifier:ge,spellSaveDC:me,spellAttackBonus:se,languages:ve,link:ie,notes:x}}),c(!r)};return e.jsx(Ce,{cardData:a,closeExpandedCard:t,deleteCard:s,isEditing:r,saveCard:ye,children:r?e.jsxs(e.Fragment,{children:[e.jsx(d,{id:"player-card-title",variant:"cardHeader",children:"Editing"}),e.jsx(V,{children:e.jsx(Pt,{content:ke,setContent:Ye})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:u,handleEdit:ye}),e.jsxs(V,{children:[e.jsxs(A,{children:[e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Race: "}),S]}),e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Class: "}),o]}),e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Level: "}),M]}),e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Background: "}),k]}),e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Size: "}),P||"M"]})]}),e.jsxs(A,{children:[e.jsx(W,{label:"STR",value:te,cardType:h.Player}),e.jsx(W,{label:"DEX",value:ae,cardType:h.Player}),e.jsx(W,{label:"CON",value:b,cardType:h.Player}),e.jsx(W,{label:"INT",value:D,cardType:h.Player}),e.jsx(W,{label:"WIS",value:H,cardType:h.Player}),e.jsx(W,{label:"CHA",value:O,cardType:h.Player})]}),e.jsxs(A,{children:[e.jsx(Be,{label:"HP",value:_,cardType:h.Player}),e.jsx(Be,{label:"AC",value:R,cardType:h.Player})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(L,{label:"Passive Perception",value:de}),e.jsx(L,{label:"Passive Investigation",value:fe}),e.jsx(L,{label:"Passive Stealth",value:ce}),e.jsx(L,{label:"Passive Insight",value:ue})]}),e.jsxs(I,{children:[e.jsx(L,{label:"Spell Casting Ability",value:pe}),e.jsx(L,{label:"Spell Casting Modifier",value:ge}),e.jsx(L,{label:"Spell Save DC",value:me}),e.jsx(L,{label:"Spell Attack Bonus",value:se})]})]}),e.jsxs(I,{children:[e.jsx(L,{label:"Speed",value:he}),e.jsx(L,{label:"Languages",value:ve}),e.jsx(L,{label:"Character Sheet",value:ie})]}),e.jsx(I,{children:e.jsx(q,{label:"Notes",value:x,cardType:h.Player})})]})]})})},Rt=({content:t,setContent:a})=>{const[n,s]=l.useState([Ie]),[i,r]=l.useState(Ie),[c,u]=l.useState(!1),p=o=>{const y=n.filter(M=>M.name===o)??[Ie];r(y[0])},x=l.useCallback(async()=>{u(!0);const o=await fetch("https://api.open5e.com/monsters/?limit=1000");try{const M=(await o.json()).results.sort((S,j)=>S.name<j.name?-1:S.name>j.name?1:0),B=[Ie,...M];s(B)}catch(y){console.log(y)}u(!1)},[]),f={paddingBottom:2,maxWidth:70};return l.useEffect(()=>{x()},[x]),l.useEffect(()=>{if(i.name!=="custom"){const o=Ea(i);a({...o,notes:t.notes})}},[i]),e.jsxs("div",{"data-testid":"monster-form",children:[e.jsxs(I,{sxOverrides:{p:0},children:[e.jsx(Pe,{id:"monster-preset-label",children:"Monster Preset"}),e.jsxs(A,{sxOverrides:{padding:0},children:[e.jsx(Re,{labelId:"monster-preset-label",id:"monster-preset",fullWidth:!0,value:i.name,onChange:o=>p(o.target.value),children:n.map(o=>e.jsx(Z,{value:o.name,children:o.name},o.name))}),c?e.jsx(ua,{sx:{alignSelf:"center",ml:2}}):null]})]}),i.name==="custom"?e.jsxs(I,{sxOverrides:{p:0},children:[e.jsx(N,{type:h.Monster}),e.jsx(g,{id:"title",label:"Monster Name",sx:{paddingBottom:2},fullWidth:!0,variant:"outlined",value:t.title,onChange:o=>a({...t,title:o.target.value})}),e.jsxs(A,{children:[e.jsx(g,{id:"size",label:"Size",sx:{paddingBottom:2},variant:"outlined",value:t.size,onChange:o=>a({...t,size:o.target.value})}),e.jsx(g,{id:"type",label:"Type",sx:{paddingBottom:2},variant:"outlined",value:t.type,onChange:o=>a({...t,type:o.target.value})}),e.jsx(g,{id:"challenge-rating",label:"Challenge Rating",sx:{paddingBottom:2},variant:"outlined",value:t.challengeRating,onChange:o=>a({...t,challengeRating:o.target.value})})]}),e.jsx(N,{type:h.Monster}),e.jsxs(A,{children:[e.jsx(g,{id:"strength",label:"STR",sx:f,variant:"outlined",value:t.strength,onChange:o=>a({...t,strength:o.target.value})}),e.jsx(g,{id:"dexterity",label:"DEX",sx:f,variant:"outlined",value:t.dexterity,onChange:o=>a({...t,dexterity:o.target.value})}),e.jsx(g,{id:"constitution",label:"CON",sx:f,variant:"outlined",value:t.constitution,onChange:o=>a({...t,constitution:o.target.value})}),e.jsx(g,{id:"intelligence",label:"INT",sx:f,variant:"outlined",value:t.intelligence,onChange:o=>a({...t,intelligence:o.target.value})}),e.jsx(g,{id:"wisdom",label:"WIS",sx:f,variant:"outlined",value:t.wisdom,onChange:o=>a({...t,wisdom:o.target.value})}),e.jsx(g,{id:"charisma",label:"CHA",sx:f,variant:"outlined",value:t.charisma,onChange:o=>a({...t,charisma:o.target.value})})]}),e.jsx(N,{type:h.Monster}),e.jsxs(A,{children:[e.jsx(g,{id:"hp",label:"HP",sx:{paddingBottom:2},variant:"outlined",value:t.hp,onChange:o=>a({...t,hp:o.target.value})}),e.jsx(g,{id:"ac",label:"AC",sx:{paddingBottom:2},variant:"outlined",value:t.ac,onChange:o=>a({...t,ac:o.target.value})})]}),e.jsx(N,{type:h.Monster}),e.jsxs(A,{children:[e.jsxs(I,{sxOverrides:{width:"45%"},children:[e.jsx(g,{id:"vulnerabilities",label:"Vulnerabilties",sx:{paddingBottom:2},variant:"outlined",value:t.vulnerabilities,onChange:o=>a({...t,vulnerabilities:o.target.value})}),e.jsx(g,{id:"resistances",label:"Resistances",sx:{paddingBottom:2},variant:"outlined",value:t.resistances,onChange:o=>a({...t,resistances:o.target.value})}),e.jsx(g,{id:"damage-immunities",label:"Damage Immunities",sx:{paddingBottom:2},variant:"outlined",value:t.damageImmunities,onChange:o=>a({...t,damageImmunities:o.target.value})}),e.jsx(g,{id:"condition-immmunities",label:"Condition Immunities",sx:{paddingBottom:2},variant:"outlined",value:t.conditionImmunities,onChange:o=>a({...t,conditionImmunities:o.target.value})})]}),e.jsxs(I,{sxOverrides:{width:"45%"},children:[e.jsx(g,{id:"proficincies",label:"Proficincies",sx:{paddingBottom:2},variant:"outlined",value:t.proficiencies,onChange:o=>a({...t,proficiencies:o.target.value})}),e.jsx(g,{id:"senses",label:"Senses",sx:{paddingBottom:2},variant:"outlined",value:t.senses,onChange:o=>a({...t,senses:o.target.value})}),e.jsx(g,{id:"languages",label:"Languages",fullWidth:!0,sx:{paddingBottom:2},variant:"outlined",value:t.languages,onChange:o=>a({...t,languages:o.target.value})}),e.jsx(g,{id:"speed",label:"Speed",sx:{paddingBottom:2},variant:"outlined",value:t.speed,onChange:o=>a({...t,speed:o.target.value})})]})]}),e.jsx(N,{type:h.Monster}),e.jsxs(I,{children:[e.jsx(g,{id:"special-abilities",label:"Special Abilties",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.specialAbilities,onChange:o=>a({...t,specialAbilities:o.target.value})}),e.jsx(g,{id:"actions",label:"Actions",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.actions,onChange:o=>a({...t,actions:o.target.value})}),e.jsx(g,{id:"legendary-actions",label:"Legendary Actions",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.legendaryActions,onChange:o=>a({...t,legendaryActions:o.target.value})}),e.jsx(g,{id:"description",label:"Decription",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.description,onChange:o=>a({...t,description:o.target.value})}),e.jsx(g,{id:"notes",label:"Notes",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2},multiline:!0,rows:18,value:t.notes,onChange:o=>a({...t,notes:o.target.value})}),e.jsx(g,{id:"image-url",label:"Image URL",fullWidth:!0,variant:"outlined",sx:{paddingBottom:2,display:"none"},value:t.image,onChange:o=>a({...t,image:o.target.value})})]})]}):null]})},ts=({closeExpandedCard:t,expandedCardData:a,updateCard:n,deleteCard:s})=>{const i=a.content,[r,c]=l.useState(!1),[u,p]=l.useState(i.title),[x,f]=l.useState(i.size),[o,y]=l.useState(i.type),[M,B]=l.useState(i.hitDice),[S,j]=l.useState(i.hitPointsRoll),[k,z]=l.useState(i.hp),[P,ee]=l.useState(i.ac),[_,X]=l.useState(i.strength),[R,U]=l.useState(i.dexterity),[te,K]=l.useState(i.constitution),[ae,m]=l.useState(i.intelligence),[b,T]=l.useState(i.wisdom),[D,F]=l.useState(i.charisma),[H,Q]=l.useState(i.speed),[O,$]=l.useState(i.proficiencies),[de,Ee]=l.useState(i.vulnerabilities),[fe,Fe]=l.useState(i.resistances),[ce,Ne]=l.useState(i.damageImmunities),[ue,He]=l.useState(i.conditionImmunities),[he,Oe]=l.useState(i.senses),[pe,We]=l.useState(i.challengeRating),[ge,ze]=l.useState(i.specialAbilities),[me,_e]=l.useState(i.actions),[se,Ue]=l.useState(i.legendaryActions),[ie,$e]=l.useState(i.image),[ve,Ve]=l.useState(i.link),[ke,Ye]=l.useState(i.languages),[ye,C]=l.useState(i.description),[it,Et]=l.useState(i.notes),nt={title:u,size:x,type:o,hitDice:M,hitPointsRoll:S,hp:k,ac:P,strength:_,dexterity:R,constitution:te,intelligence:ae,wisdom:b,charisma:D,speed:H,proficiencies:O,vulnerabilities:de,resistances:fe,damageImmunities:ce,conditionImmunities:ue,senses:he,challengeRating:pe,specialAbilities:ge,actions:me,legendaryActions:se,image:ie,link:ve,languages:ke,description:ye,notes:it},Ft=w=>{p(w.title),f(w.size),y(w.type),B(w.hitDice),j(w.hitPointsRoll),z(w.hp),ee(w.ac),X(w.strength),U(w.dexterity),K(w.constitution),m(w.intelligence),T(w.wisdom),F(w.charisma),Q(w.speed),$(w.proficiencies),Ee(w.vulnerabilities),Fe(w.resistances),Ne(w.damageImmunities),He(w.conditionImmunities),Oe(w.senses),We(w.challengeRating),ze(w.specialAbilities),_e(w.actions),Ue(w.legendaryActions),$e(w.image),Ve(w.link),Ye(w.languages),C(w.description),Et(w.notes)},rt=()=>{r&&n({...a,content:{...nt}}),c(!r)};return e.jsx(Ce,{cardData:a,closeExpandedCard:t,deleteCard:s,isEditing:r,saveCard:rt,children:r?e.jsxs(e.Fragment,{children:[e.jsx(d,{id:"editing-title",variant:"cardHeader",children:"Editing"}),e.jsx(V,{children:e.jsx(Rt,{content:nt,setContent:Ft})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:u,handleEdit:rt}),e.jsxs(V,{children:[e.jsxs(A,{children:[e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Size: "}),x]}),e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"Type: "}),o]}),e.jsxs(d,{variant:"cardSubtitle",component:"h4",sx:{alignSelf:"center",margin:0},children:[e.jsx("strong",{children:"CR: "}),pe]})]}),e.jsxs(A,{children:[e.jsx(W,{label:"STR",value:_,cardType:h.Monster}),e.jsx(W,{label:"DEX",value:R,cardType:h.Monster}),e.jsx(W,{label:"CON",value:te,cardType:h.Monster}),e.jsx(W,{label:"INT",value:ae,cardType:h.Monster}),e.jsx(W,{label:"WIS",value:b,cardType:h.Monster}),e.jsx(W,{label:"CHA",value:D,cardType:h.Monster})]}),e.jsxs(A,{children:[e.jsx(Be,{label:"HP",value:k,cardType:h.Monster}),e.jsx(Be,{label:"AC",value:P,cardType:h.Monster})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(L,{label:"Vulnerabilities",value:de}),e.jsx(L,{label:"Resistances",value:fe}),e.jsx(L,{label:"Dammage Immunities",value:ce}),e.jsx(L,{label:"Condition Immunitiest",value:ue})]}),e.jsxs(I,{children:[e.jsx(L,{label:"Proficiencies",value:O}),e.jsx(L,{label:"Senses",value:he}),e.jsx(L,{label:"Languages",value:ke}),e.jsx(L,{label:"Speed",value:H})]})]}),e.jsx(I,{children:e.jsx(q,{label:"Special Abilities",value:ge,cardType:h.Monster})}),e.jsx(I,{children:e.jsx(q,{label:"Actions",value:me,cardType:h.Monster})}),se&&e.jsx(I,{children:e.jsx(q,{label:"Legendary Actions",value:se,cardType:h.Monster})}),e.jsx(I,{children:e.jsx(q,{label:"Description",value:ye,cardType:h.Monster})}),e.jsx(I,{children:e.jsx(q,{label:"Notes",value:it,cardType:h.Monster})}),ie&&e.jsx(I,{children:e.jsx("img",{src:ie,alt:`image of ${u}`})})]})]})})},as=({cardType:t,setCardType:a})=>e.jsxs(e.Fragment,{children:[e.jsx(Pe,{id:"card-type-select-label",children:"Card Type"}),e.jsx(Re,{labelId:"card-type-select-label",sx:{marginBottom:2},id:"card-type-select",value:t,"data-testid":"card-type-select",onChange:n=>a(n.target.value),children:Object.values(h).map(n=>e.jsx(Z,{value:n,children:n},n))})]}),ss=({cardColumn:t,setCardColumn:a})=>{const n=s=>{switch(s){case"droppable-1":return"Column 1";case"droppable-2":return"Column 2";case"droppable-3":return"Column 3";case"droppable-4":return"Column 4";default:return"Column 1"}};return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{id:"card-column-select-label",children:"Column"}),e.jsx(Re,{labelId:"card-column-select-label",sx:{marginBottom:2},id:"card-column-select",value:t,"data-testid":"card-column-select",onChange:s=>a(s.target.value),children:["droppable-1","droppable-2","droppable-3","droppable-4"].map(s=>e.jsx(Z,{value:s,children:n(s)},s))})]})},is=({isVisible:t,createCard:a,closeNewCardDialog:n})=>{const s=zt(),i=_t("activeTab")??oe[0],[r,c]=l.useState({}),[u,p]=l.useState(h.Note),[x,f]=l.useState("droppable-1"),o=()=>{a({id:s,content:r,type:u,column:x,tab:i}),c({})},y=()=>{c({}),n()},M=()=>{switch(u){case h.Map:return e.jsx(Lt,{content:r,setContent:c,"data-testid":"map-form"});case h.Player:return e.jsx(Pt,{content:r,setContent:c,"data-testid":"player-form"});case h.Monster:return e.jsx(Rt,{content:r,setContent:c,"data-testid":"monster-form"});case h.Note:return e.jsx(Dt,{content:r,setContent:c,"data-testid":"note-form"});case h.Rule:return e.jsx(Bt,{content:r,setContent:c,"data-testid":"rule-form"});default:return e.jsx("div",{children:"default"})}};return e.jsxs(st,{isVisible:!!t,close:y,children:[e.jsx(d,{id:"modal-title",variant:"cardHeader",children:"Create Card"}),e.jsxs(V,{children:[e.jsxs(v,{sx:{display:"flex",flexDirection:"column",mb:1},children:[e.jsx(as,{cardType:u,setCardType:p}),e.jsx(ss,{cardColumn:x,setCardColumn:f})]}),e.jsx(v,{sx:{display:"flex",flexDirection:"column",mb:2},children:M()})]}),e.jsx(At,{handleLeftButton:y,handleRightButton:o,"data-testid":"button-area"})]})},ns=({handleContextMenuClose:t,handleContextClick:a,menuPosition:n})=>{const{top:s,left:i}=n,[r,c]=wt(),[u,p]=jt();return e.jsx(ha,{open:!0,onClose:t,anchorReference:"anchorPosition",anchorPosition:{top:s,left:i},"data-testid":"small-card-context-menu",children:e.jsxs(pa,{sx:{minWidth:200},children:[e.jsxs(Z,{onClick:()=>a(re.Open),children:[e.jsx(Te,{children:e.jsx(ga,{})}),e.jsx(Ge,{children:"Open"})]},"open"),e.jsx(we,{}),e.jsx(Z,{children:"Move"}),r.map(x=>e.jsxs(Z,{onClick:()=>a(re.Move,x),"data-testid":"tab-item",children:[x===u?e.jsx(Te,{children:e.jsx(ma,{})}):e.jsx(Te,{}),e.jsx(Ge,{children:Ut.toUpper(x)})]},x)),e.jsx(we,{}),e.jsxs(Z,{onClick:()=>a(re.Delete),children:[e.jsx(Te,{children:e.jsx(xa,{})}),e.jsx(Ge,{children:"Delete"})]},"delete")]})})},rs=({activeTab:t,showNewCardDialog:a,setShowNewCardDialog:n})=>{const[s,i]=kt(),r=Mt(),[c,u]=l.useState(null),[p,x]=l.useState(null),[f,o]=l.useState(!1),[y,M]=l.useState({top:0,left:0}),B=Object.values(s).flat();l.useEffect(()=>{if(c){const m=B.find(b=>b.id===c)??null;x(m)}},[c]);const S=()=>{u(null),x(null)},j=(m,b)=>{m.preventDefault(),M({top:m.clientY,left:m.clientX}),o(b)},k=()=>{o(!1)},z=m=>{const b=B.find(T=>T.id===m);return b?b.column:(console.error("card not found"),"")},P=(m,b)=>{if(console.log(m,b),!f){console.error("Card ID not found.");return}const T=z(f),D=Object.assign({},s);switch(m){case re.Open:u(f),o(!1);break;case re.Move:D[T].map(F=>{F.id===f&&(F.tab=b??"")}),i(D),o(!1);break;case re.Delete:D[T]=D[T].filter(F=>F.id!==f),i(D),o(!1);break}},ee=(m,b,T,D,F)=>{const H=Object.assign({},s),Q=H[b],O=H[T];if(T==(m==null?void 0:m.column)){const[$]=O.splice(D,1);O.splice(F,0,$)}else{const[$]=Q.splice(D,1);$.column=T,O.splice(F,0,$),H[T]=O}return H},_=()=>{n(!1)},X=m=>{const b=m.column,T=s[`${b}`];T.push(m),i({...s,[`${b}`]:T}),n(!1)},R=m=>{const b=s[m.column].find(T=>T.id===m.id);b&&(b.tab=m.tab,b.content=m.content,i(s)),m.tab!==t&&S()},U=m=>{const b=s[m.column],T=b.find(D=>D.id===m.id);if(T){const D=b.indexOf(T);b.splice(D,1),i(s)}},te=m=>{if(!m.destination){console.error("outside of droppable area");return}const b=m.source.droppableId,T=m.destination.droppableId,D=m.source.index,F=m.destination.index,H=m.draggableId,Q=s[b].find($=>$.id===H);if(!Q){console.error("targetCard not found");return}const O=ee(Q,b,T,D,F);i(O)},K=m=>m.filter(b=>b.tab===t),ae=()=>{if(p)switch(p.type){case h.Note:return e.jsx(Ja,{closeExpandedCard:S,expandedCardData:p,updateCard:R,deleteCard:U});case h.Player:return e.jsx(es,{closeExpandedCard:S,expandedCardData:p,updateCard:R,deleteCard:U});case h.Monster:return e.jsx(ts,{closeExpandedCard:S,expandedCardData:p,updateCard:R,deleteCard:U});case h.Map:return e.jsx(Xa,{closeExpandedCard:S,expandedCardData:p,updateCard:R,deleteCard:U});case h.Rule:return e.jsx(Za,{closeExpandedCard:S,expandedCardData:p,updateCard:R,deleteCard:U});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx($t,{onDragEnd:te,children:e.jsxs(v,{sx:m=>({width:r.width,minHeight:r.height,height:"100%",paddingLeft:m.spacing(1),paddingRight:m.spacing(1),display:"flex",flexWrap:"wrap",backgroundColor:m.palette.grey[100]}),"data-testid":"screen-area",children:[e.jsx(Ae,{columnId:1,cards:K(s["droppable-1"]),expandCard:u,handleContextMenuOpen:j}),e.jsx(Ae,{columnId:2,cards:K(s["droppable-2"]),expandCard:u,handleContextMenuOpen:j}),e.jsx(Ae,{columnId:3,cards:K(s["droppable-3"]),expandCard:u,handleContextMenuOpen:j}),e.jsx(Ae,{columnId:4,cards:K(s["droppable-4"]),expandCard:u,handleContextMenuOpen:j})]})}),ae(),e.jsx(is,{isVisible:a,createCard:X,closeNewCardDialog:_}),f&&e.jsx(ns,{handleContextMenuClose:k,handleContextClick:P,menuPosition:y})]})};class pt extends l.Component{constructor(){super(...arguments);qe(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,s){console.error("Uncaught error:",n,s)}render(){return this.state.hasError?e.jsxs(v,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",my:10,width:"100%"},"data-testId":"error-boundry",children:[e.jsx(d,{id:"card-title",variant:"h3",component:"h3","data-testid":"title-view",children:"Oops! Looks like we rolled a 1..."}),e.jsx(v,{sx:{display:"flex",flexDirection:"column",alignItems:"center",m:10,overflowY:"hidden"},children:e.jsx("img",{width:"50%",src:It,alt:"a twenty sided die showing a one."})}),e.jsx(J,{sx:{width:"30%",p:2},variant:"contained",onClick:()=>localStorage.clear(),children:"Reset All Data"})]}):this.props.children}}const ls=({showNewTabDialog:t,setshowNewTabDialog:a,createNewTab:n,tabs:s})=>{const[i,r]=l.useState(""),c=x=>r(x.target.value),u=()=>{r(""),a(!1)},p=()=>{n(i),u()};return e.jsxs(fa,{open:t,onClose:u,children:[e.jsx(va,{children:"Create New Tab"}),e.jsxs(ya,{children:[e.jsx(ba,{children:"Please enter a name for your new tab."}),e.jsx(g,{autoFocus:!0,margin:"dense",id:"tab-name",label:"Tab Name",fullWidth:!0,variant:"standard",onChange:c,value:i})]}),e.jsxs(ja,{children:[e.jsx(J,{onClick:u,children:"Cancel"}),e.jsx(J,{disabled:s.includes(i)||i==="","data-testid":"create-tab-btn",onClick:p,children:"Create Tab"})]})]})},os=({tabs:t,setTabs:a,activeTab:n,setActiveTab:s,setShowNewCardDialog:i})=>{const r=E(),[c,u]=l.useState(!1),[p,x]=l.useState(!1),f=(j,k)=>{s(k)},o=()=>{x(!0)},y=()=>{const j=t.filter(k=>k!==n);a(j),s(j[0])},M=()=>{i(!0)},B=j=>{a([...t,j]),s(j)},S={position:c?"fixed":"static",display:"flex",justifyContent:"space-between",top:0,left:0,right:0,width:"100%",zIndex:999,background:r.palette.background.default};return l.useEffect(()=>{const j=()=>{window.scrollY>50?u(!0):u(!1)};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]),e.jsxs(v,{sx:S,"data-testid":"tab-header",children:[e.jsx(wa,{variant:"scrollable",scrollButtons:"auto",value:n,sx:{flexGrow:1},onChange:f,children:t.map(j=>e.jsx(Me,{label:j,value:j,sx:{mt:1}},j))}),e.jsx(we,{orientation:"vertical",variant:"middle",flexItem:!0}),e.jsx(Me,{label:"+ Tab",value:"newTab",onClick:o},"newTab"),e.jsx(Me,{icon:e.jsx(at,{}),value:"deleteTab",onClick:y},"deleteTab"),e.jsx(we,{orientation:"vertical",variant:"middle",flexItem:!0}),e.jsx(Me,{label:"+ Card",value:"newCard",sx:{color:r.palette.background.paper,background:r.palette.secondary.main,my:1,mx:2},onClick:M},"newCard"),e.jsx(ls,{showNewTabDialog:p,setshowNewTabDialog:x,createNewTab:B,tabs:t})]})},ds=()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{mb:1},variant:"mainTitle",children:"Welcome to DM Screen!"}),e.jsx(d,{sx:{mb:4},variant:"cardSectionLabel",children:"Your ultimate companion for running 5e Dungeons and Dragons online."}),e.jsx(d,{sx:{mb:3},component:"p",children:"DM Screen is designed to help you get organized so you can focus on what matters, having fun! It is a dynamic version of the pen and paper dm screen, which you can customize to meet your needs."}),e.jsx(d,{sx:{mb:3},component:"p",children:"Take this quick tour to learn about the different features available or just dive right in and start creating."})]}),cs=()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{mb:1},variant:"mainTitle",children:"Cards"}),e.jsxs(d,{sx:{mb:3},component:"p",children:["There are 5 types of cards you can create: ",e.jsx(d,{variant:"fieldLabel",children:"Rules, "}),e.jsx(d,{variant:"fieldLabel",children:"Notes, "}),e.jsx(d,{variant:"fieldLabel",children:"Maps, "}),e.jsx(d,{variant:"fieldLabel",children:"Monsters, "}),"and"," ",e.jsx(d,{variant:"fieldLabel",children:"Players."})," You can even use"," ",e.jsxs(d,{variant:"fieldLabel",children:[e.jsx(Ta,{href:"https://www.markdownguide.org/cheat-sheet",underline:"hover",target:"_blank",rel:"noreferrer",children:"markdown"})," "]}),"to format your cards for easier readability."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Rule Cards:"})," These are the standard rules from the pen & paper dm screen."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Note Cards:"})," A simple card with a single text field for keeping track of anything else you need."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Map Cards:"})," This card type has a space for a room id, as well as read-out-loud text and dm notes."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Monster Cards:"})," Monster cards contain a stat block and notes section. There's even an option to import monsters from the Basic Rules when you create a card."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Player Cards:"})," A basic player stat block with a focus on the stats you need on the fly like AC and passive percpetion."]})]}),us=()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{mb:1},variant:"mainTitle",children:"Layout"}),e.jsx(d,{sx:{mb:3},component:"p",children:"DM Screen features a fully customizable layout, that you can change on the fly."}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Drag & Drop: "}),"Reorganize your notes on the fly with our intuitive drag-and-drop feature which allows you to effortlessly arrange your cards, making it easy to stay organized no matter what your players get up to."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Custom Tabs: "}),"Need additional structure? Fear not! DM Screen let's you organize your cards across multiple tabs, so you can keep your campaign data organized by session, location, or any other way you see fit."]})]}),hs=()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{mb:1},variant:"mainTitle",children:"Import/Export"}),e.jsx(d,{sx:{mb:3},component:"p",children:"Don't lose your data!"}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"No account needed. "}),"DM Screen doesn't store your data anywhere but in your browser. This means you can use it without an account and I can develop it for free."]}),e.jsxs(d,{sx:{mb:3},component:"p",children:[e.jsx(d,{variant:"fieldLabel",children:"Don't lose your data! "}),"Since DM Screen doesn't save your data anywhere, you will lose it if you clear your browser cache. To make sure this doesn't happen, you can export your data to a file, and then import it again later."]})]}),ps=({setSeenWelcomeDialog:t,showWelcomeDialog:a})=>{const n=[e.jsx(ds,{}),e.jsx(cs,{}),e.jsx(us,{}),e.jsx(hs,{})],s=["Welcome","Cards","Layout","Export/Import"],[i,r]=l.useState(0),c=()=>{if(i===n.length-1){t();return}r(p=>p+1)},u=()=>{r(p=>p-1)};return e.jsx(st,{isVisible:a,close:t,children:e.jsxs(v,{id:"welcome-dialog",sx:{overflowY:"scroll",display:"flex",flexDirection:"column",minHeight:"100%",p:6,pb:2},children:[e.jsx(Ca,{activeStep:i,sx:{mb:8},children:s.map(p=>e.jsx(Sa,{children:e.jsx(ka,{children:p})},p))}),n[i],e.jsxs(v,{sx:{display:"flex",flexDirection:"row",pt:2,marginTop:"auto"},children:[e.jsx(J,{variant:"outlined",disabled:i===0,onClick:u,sx:{mr:1},children:"Back"}),e.jsx(v,{sx:{flex:"1 1 auto"}}),e.jsx(J,{variant:"contained",onClick:c,children:i===n.length-1?"Finish":"Next"})]})]})})};function gs(){const[t,a]=wt(),[n,s]=jt(),[i,r]=l.useState(!1),[c,u]=Vt(["seenWelcomeDialog"]),p=()=>{u("seenWelcomeDialog",!0,{path:"/"})};return e.jsx(Yt,{children:e.jsxs(pt,{children:[e.jsx(Wa,{setTabs:a,activeTab:n,setActiveTab:s}),e.jsx(os,{tabs:t,setTabs:a,activeTab:n,setActiveTab:s,setShowNewCardDialog:r}),e.jsx(pt,{children:e.jsx(rs,{activeTab:n,showNewCardDialog:i,setShowNewCardDialog:r})}),e.jsx(ps,{showWelcomeDialog:!c.seenWelcomeDialog,setSeenWelcomeDialog:p})]})})}qt.createRoot(document.getElementById("root")).render(e.jsxs(Ma,{theme:Y,children:[e.jsx(Ia,{}),e.jsx(gs,{})]}));
